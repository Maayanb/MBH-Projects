<!DOCTYPE html>
<html>
<head>
    <title>Sloth Bounce ‚Äì Catch the Cookies</title>
    <style>
        body {
            text-align: center;
            background-color: white;
            color: black;
        }
        canvas {
            background-color: white;
            display: block;
            margin: auto;
        }
        #restartButton {
            display: none;
            margin-top: 20px;
            padding: 10px 20px;
            font-size: 18px;
            cursor: pointer;
        }
    </style>
</head>
<body>
    <h1>Sloth Bounce ‚Äì Catch the Cookies!</h1>
    <p>Jump and catch as many cookies as you can! üç™</p>
    <p>Score: <span id="score">0</span></p>
    <canvas id="gameCanvas" width="500" height="500"></canvas>
    <button id="restartButton" onclick="restartGame()">Play Again?</button>
    <script>
        const canvas = document.getElementById("gameCanvas");
        const ctx = canvas.getContext("2d");
        const scoreDisplay = document.getElementById("score");
        const restartButton = document.getElementById("restartButton");

        // Load the sloth face image
        const slothImage = new Image();
        slothImage.src = 'https://tse3.mm.bing.net/th?id=OIP.wZX54TSHH67ayJTNR0caaQHaHa&pid=Api'; // Sloth face image URL

        let player = {
            x: 250,
            y: canvas.height - 50, // Sloth starts at the bottom
            size: 60,
            dy: 0,
            gravity: 0.5,
            bounce: -12,
            maxJump: 50,
            topLimit: 50, // Sloth can only jump 50 pixels below the top
            image: slothImage
        };

        let score = 0;
        let cookies = [];
        let gameRunning = true;

        function drawPlayer() {
            ctx.drawImage(player.image, player.x - player.size / 2, player.y - player.size / 2, player.size, player.size);
        }

        function drawCookies() {
            ctx.font = "50px Arial";
            cookies.forEach(cookie => {
                ctx.fillText("üç™", cookie.x, cookie.y);
            });
        }

        function moveCookies() {
            if (!gameRunning) return;
            cookies.forEach(cookie => {
                cookie.x -= cookie.speed;
                if (cookie.x < player.x && !cookie.passed) {
                    cookie.passed = true;
                    score++;
                    scoreDisplay.textContent = score;
                }
            });
            cookies = cookies.filter(cookie => cookie.x > -100);
        }

        function checkCollision() {
            cookies.forEach(cookie => {
                let distance = Math.hypot(player.x - cookie.x, player.y - cookie.y);
                if (distance < 60 && !cookie.hit) {
                    cookie.hit = true;
                    score++;
                    scoreDisplay.textContent = score;
                }
            });
        }

        function gameOver() {
            gameRunning = false;
            restartButton.style.display = "block";
        }

        function restartGame() {
            location.reload();
        }

        function update() {
            if (!gameRunning) return;
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            drawPlayer();
            drawCookies();

            player.y += player.dy;
            player.dy += player.gravity;

            // Ensure sloth does not jump too high
            if (player.y < player.topLimit) {
                player.y = player.topLimit;
                player.dy = 0; // Make the sloth start falling back down
            }
            

            // Keep sloth at bottom
            if (player.y > canvas.height - 50) {
                player.y = canvas.height - 50;
                player.dy = 0;
            }

            moveCookies();
            checkCollision();
            requestAnimationFrame(update);
            if (!gameRunning) return;
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            drawPlayer();
            drawCookies();

            player.y += player.dy;
            player.dy += player.gravity;
            if (player.y > canvas.height - 50) player.y = canvas.height - 50; // Keep sloth at bottom

            moveCookies();
            checkCollision();
            requestAnimationFrame(update);
        }

        document.addEventListener("keydown", function (event) {
            if (event.key === " ") {
                player.dy = player.bounce;
            }
        });
        
        document.addEventListener("touchstart", function () {
            player.dy = player.bounce;
        });

        setInterval(() => {
            if (!gameRunning) return;
            let yPosition = Math.random() * (canvas.height - 200);
            cookies.push({ x: canvas.width, y: yPosition, speed: 3 + Math.random() * 2, passed: false, hit: false });
        }, 1500);

        slothImage.onload = update;
    </script>
</body>
</html>
